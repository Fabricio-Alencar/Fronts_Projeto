<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Projack Impulse - Cadastro</title>

  <!-- Fontes externas -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poetsen+One&display=swap">
  <link rel="stylesheet" href="https://use.typekit.net/xoh7gtf.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Quantico&display=swap">  

  <!-- CSS local -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/css_cadastro/geral.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/css_cadastro/lado_esquerdo.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/css_cadastro/lado_direito.css') }}">
</head>
<body>

  <div class="tela">
    <div class="conteudo">

      <!-- Painel esquerdo -->
      <div class="painel-esquerdo">
        <!-- Logo no topo -->
        <img src="{{ url_for('static', filename='imagens/imagens_cadastro/Logo.png') }}" alt="Logo Projack Impulse" class="logo" />

        <!-- Texto central -->
        <div class="painel-esquerdo-texto">
          <p>Voc√™ nasceu para explorar novos mundos. Comece agora!</p>
          <p>Cadastre-se e lidere sua jornada entre projetos.</p>
        </div>

        <!-- Bot√£o voltar para login -->
        <a href="{{ url_for('login') }}" class="botao-voltar">Voltar para Login</a>

        <!-- Foguete sobreposto no canto inferior esquerdo -->
        <img src="{{ url_for('static', filename='imagens/imagens_cadastro/foguete.png') }}" alt="Foguete" class="foguete" />
      </div>

      <!-- Painel direito -->
      <div class="painel-direito">
        <!-- Imagem sobreposta -->
        <img src="{{ url_for('static', filename='imagens/imagens_cadastro/estrelas.png') }}" alt="Decora√ß√£o" class="imagem-sobreposta" />

        <h1>Cadastre-se</h1>
        <form method="POST" action="{{ url_for('cadastro') }}">
          <div class="form-campos">
            <div class="campo">
              <img src="{{ url_for('static', filename='imagens/imagens_cadastro/pessoa.png') }}" alt="√çcone Nome" class="icone" />
              <input type="text" placeholder="Nome" name="nome" required />
            </div>

            <div class="campo">
              <img src="{{ url_for('static', filename='imagens/imagens_cadastro/telefone.png') }}" alt="√çcone Telefone" class="icone" />
              <input type="tel" placeholder="Telefone" name="telefone" required />
            </div>

            <div class="campo">
              <img src="{{ url_for('static', filename='imagens/imagens_cadastro/envelope.png') }}" alt="√çcone E-mail" class="icone" />
              <input type="email" placeholder="E-mail" name="email" required />
            </div>

            <div class="campo">
              <img src="{{ url_for('static', filename='imagens/imagens_cadastro/cadeado.png') }}" alt="√çcone Senha" class="icone" />
              <input type="password" placeholder="Senha" name="senha" required />
              <span class="toggle-senha">üëÅÔ∏è</span>
            </div>
          </div>


          <button type="submit">Criar</button>
        </form>
      </div>

    </div>
  </div>

  <script>
    document.querySelectorAll('.campo').forEach(campo => {
      const toggle = campo.querySelector('.toggle-senha');
      const input = campo.querySelector('input[type="password"]');
  
      if (toggle && input) {
        toggle.addEventListener('click', () => {
          if (input.type === 'password') {
            input.type = 'text';
            toggle.textContent = 'üôà';
          } else {
            input.type = 'password';
            toggle.textContent = 'üëÅÔ∏è';
          }
        });
      }
    });
  
    // Capturar o form
    const form = document.querySelector('form');
    form.addEventListener('submit', async (e) => {
      e.preventDefault(); // evita envio tradicional
  
      const dados = {
        nome: form.nome.value,
        telefone: form.telefone.value,
        email: form.email.value,
        senha: form.senha.value,
        github: null,
        linkedin: null,
        pais: null,
        cidade: null,
        sobre_mim: null
      };
  
      try {
        const resposta = await fetch('https://microidealizador.azurewebsites.net/cadastro', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(dados)
        });
  
        const resultado = await resposta.json();
  
        if (resposta.ok) {
          alert('Cadastro realizado com sucesso!');
          form.reset();
        } else {
          alert('Erro: ' + JSON.stringify(resultado));
        }
      } catch (err) {
        console.error(err);
        alert('Erro ao conectar com a API.');
      }
    });
  </script>
  

</body>
</html>
